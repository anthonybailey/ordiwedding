# Wedding Website Initial Setup Session
**Date:** August 26, 2025, 00:00-04:00 BST  
**Participants:** Anthony Bailey, Claude Code

## Session Objectives
- Begin implementation of wedding website project
- Set up Apache reverse proxy for Canva homepage
- Create deployment infrastructure
- Handle sudo password challenges for Claude Code

## Major Accomplishments

### 1. Infrastructure Setup
- Created GitHub repository: https://github.com/anthonybailey/ordiwedding
- Configured Apache virtual host for both domains (ordi.wedding, ordiwedd.ing)
- Set up deployment script with automated Apache configuration
- Established SSH passwordless access to monkeys server

### 2. Tool Development
Created two critical sudo wrapper tools:

**suda** (local sudo wrapper)
- Opens gnome-terminal for password entry
- Enables Claude Code to run sudo commands locally
- Shows calling process name in terminal

**sumo** (remote sudo for monkeys)
- Checks sudo cache before prompting
- Only asks for password when needed
- Supports complex bash commands
- Both tools committed to SVN (revision 2322)

### 3. Apache Configuration
- Adapted config for Apache 2.2 (no .conf extension)
- Added proxy permissions for old Apache version
- Discovered SSL module needed for HTTPS backend proxy
- Created automated deployment script

## Technical Decisions

### Domain Strategy
- Using ordi.wedding for initial testing (no SSL required)
- ordiwedd.ing requires HTTPS (HSTS preloaded TLD)
- Both domains currently at Name.com parking page

### Deployment Approach
- Version control Apache configs in Git
- Deploy via scp + sumo commands
- Graceful reload to avoid disrupting existing sites

## Current Blockers

1. **Apache SSL Module**: Need mod_ssl for proxying to HTTPS Canva site
2. **DNS Updates**: Name.com in maintenance, cannot update A records
3. **Apache Version**: 2.2 on Ubuntu 8.04 has limitations with modern HTTPS

## Next Session Priorities

1. Install/configure SSL module on monkeys
2. Update DNS records when Name.com available  
3. Test full proxy chain to Canva
4. Begin wiki software evaluation (Phase 2)

## Key Learnings

- Apache 2.2 requires explicit proxy permissions via `<Proxy>` directive
- sudo timestamps persist across SSH sessions for ~20 minutes
- Old Ubuntu/Apache versions need special handling for HTTPS backends
- Terminal-based password entry solved Claude Code sudo limitations

## Files Modified
- `/etc/hosts` - Added local testing entries
- `~/.ssh/config` - Fixed SSH key algorithms for old server
- `/etc/apache2/sites-available/ordiwedding` - Deployed config
- `~/repos/main/bin/suda` and `~/repos/main/bin/sumo` - New tools

## Commands for Next Session

```bash
# Check if Name.com is back online
curl -I https://www.name.com

# Test current proxy status
curl -I http://ordi.wedding

# Continue SSL setup
sumo "/usr/sbin/a2enmod ssl"
```

## Repository Status
- GitHub repo initialized and pushed
- Apache config and deployment scripts committed
- CLAUDE.md updated with implementation status