# Apache config for Julie & Anthony's wedding website
# Handles both ordi.wedding and ordiwedd.ing domains
# Traffic comes via Cloudflare (HTTPS termination handled there)
# Cloudflare Worker routes /-/* paths here, everything else to Canva

<VirtualHost *:80>
    # Both domains serve the same content
    ServerName ordi.wedding
    ServerAlias www.ordi.wedding ordiwedd.ing www.ordiwedd.ing

    # Logging (both domains share logs)
    ErrorLog /var/log/apache2/ordiwedding-error.log
    CustomLog /var/log/apache2/ordiwedding-access.log combined

    # Document root
    DocumentRoot /var/www/ordiwedding

    # Content pages under /-/ (unobtrusive URL convention)
    Alias /- /var/www/ordiwedding/-
    <Directory /var/www/ordiwedding/->
        Order allow,deny
        Allow from all
        Options Indexes FollowSymLinks Includes MultiViews
        DirectoryIndex index.html
        # Process SSI in .html files (for shared nav)
        AddOutputFilter INCLUDES .html
    </Directory>

    # CGI scripts for form handling (RSVP etc)
    <Directory /var/www/ordiwedding/-/cgi>
        Options +ExecCGI
        AddHandler cgi-script .pl
    </Directory>

    # Root directory (shouldn't be reached due to Worker, but just in case)
    <Directory /var/www/ordiwedding>
        Order allow,deny
        Allow from all
        Options Indexes FollowSymLinks
    </Directory>

    # Headers for Cloudflare compatibility
    Header always set Access-Control-Allow-Origin "*"
</VirtualHost>

# Note: SSL/HTTPS is handled by Cloudflare, not needed here
# Worker routes /-/* traffic here, everything else to Canva